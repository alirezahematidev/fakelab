"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[309],{8453(e,s,n){n.d(s,{R:()=>r,x:()=>o});var t=n(6540);const a={},i=t.createContext(a);function r(e){const s=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(i.Provider,{value:s},e.children)}},9849(e,s,n){n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"guides/snapshot","title":"Snapshot","description":"The snapshot command allows you to capture a real API response and turn it into a reusable mock source. This is useful when you want to bootstrap mocks from an existing API, freeze API responses for offline development, or generate realistic mock data without writing schemas manually.","source":"@site/docs/guides/snapshot.md","sourceDirName":"guides","slug":"/guides/snapshot","permalink":"/fakelab/docs/guides/snapshot","draft":false,"unlisted":false,"editUrl":"https://github.com/alirezahematidev/fakelab/docs/guides/snapshot.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Database Mode","permalink":"/fakelab/docs/guides/database-mode"},"next":{"title":"Network Simulation","permalink":"/fakelab/docs/guides/network-simulation"}}');var a=n(4848),i=n(8453);const r={sidebar_position:4},o="Snapshot",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Options",id:"options",level:3},{value:"Examples",id:"examples",level:2},{value:"Capture a Single Endpoint",id:"capture-a-single-endpoint",level:3},{value:"Specify a Source Name",id:"specify-a-source-name",level:3},{value:"Update Existing Snapshot",id:"update-existing-snapshot",level:3},{value:"Delete Existing Snapshot",id:"delete-existing-snapshot",level:3},{value:"Update All Snapshots",id:"update-all-snapshots",level:3},{value:"How It Works",id:"how-it-works",level:2},{value:"Snapshot Storage",id:"snapshot-storage",level:2},{value:"Generated Types",id:"generated-types",level:2},{value:"Use Cases",id:"use-cases",level:2},{value:"Bootstrap from Existing API",id:"bootstrap-from-existing-api",level:3},{value:"Freeze API Responses",id:"freeze-api-responses",level:3},{value:"Generate Realistic Data",id:"generate-realistic-data",level:3},{value:"Integration with Configuration",id:"integration-with-configuration",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Limitations",id:"limitations",level:2}];function c(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"snapshot",children:"Snapshot"})}),"\n",(0,a.jsx)(s.p,{children:"The snapshot command allows you to capture a real API response and turn it into a reusable mock source. This is useful when you want to bootstrap mocks from an existing API, freeze API responses for offline development, or generate realistic mock data without writing schemas manually."}),"\n",(0,a.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(s.p,{children:"Snapshots capture real API responses and convert them into TypeScript type definitions that Fakelab can use. This eliminates the need to manually write type definitions for existing APIs."}),"\n",(0,a.jsx)(s.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(s.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"npx fakelab snapshot [url] [options]\n"})}),"\n",(0,a.jsx)(s.h3,{id:"options",children:"Options"}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Option"}),(0,a.jsx)(s.th,{children:"Alias"}),(0,a.jsx)(s.th,{children:"Description"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"--name <string>"})}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"-n"})}),(0,a.jsx)(s.td,{children:"specify snapshot source name"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"--refresh <string>"})}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"-r"})}),(0,a.jsx)(s.td,{children:"refresh the specified snapshot"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"--delete <string>"})}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"-d"})}),(0,a.jsx)(s.td,{children:"delete the specified snapshot"})]})]})]}),"\n",(0,a.jsx)(s.h2,{id:"examples",children:"Examples"}),"\n",(0,a.jsx)(s.h3,{id:"capture-a-single-endpoint",children:"Capture a Single Endpoint"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"# Basic usage\r\nnpx fakelab snapshot https://jsonplaceholder.typicode.com/todos\n"})}),"\n",(0,a.jsx)(s.h3,{id:"specify-a-source-name",children:"Specify a Source Name"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"# Give the captured type a specific name\r\nnpx fakelab snapshot https://jsonplaceholder.typicode.com/todos --name Todo\n"})}),"\n",(0,a.jsx)(s.h3,{id:"update-existing-snapshot",children:"Update Existing Snapshot"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"# Refresh an existing snapshot\r\nnpx fakelab snapshot --refresh Todo\n"})}),"\n",(0,a.jsx)(s.h3,{id:"delete-existing-snapshot",children:"Delete Existing Snapshot"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"# Delete an existing snapshot\r\nnpx fakelab snapshot --delete Todo\n"})}),"\n",(0,a.jsx)(s.h3,{id:"update-all-snapshots",children:"Update All Snapshots"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"# Update all existing snapshots\r\nnpx fakelab snapshot\n"})}),"\n",(0,a.jsxs)(s.p,{children:["Also can define snapshot sources in config, run ",(0,a.jsx)(s.code,{children:"npx fakelab snapshot"})," command to capture them all:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-ts",children:'export default defineConfig({\r\n  sourcePath: ["./fixtures"],\r\n  server: { includeSnapshots: true },\r\n  snapshot: {\r\n    enabled: true,\r\n    sources: [\r\n      {\r\n        name: "Todo",\r\n        url: "https://jsonplaceholder.typicode.com/todos",\r\n      },\r\n      {\r\n        name: "Post",\r\n        url: "https://jsonplaceholder.typicode.com/posts",\r\n      },\r\n    ],\r\n  },\r\n});\n'})}),"\n",(0,a.jsx)(s.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Fetch the API"})," - Fakelab makes a request to the specified URL"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Analyze Response"})," - The response structure is analyzed"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Generate Types"})," - TypeScript type definitions are generated"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Save Snapshot"})," - The snapshot is saved to your project"]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"snapshot-storage",children:"Snapshot Storage"}),"\n",(0,a.jsx)(s.p,{children:"Snapshots are stored in your project directory:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:".fakelab/snapshots/\r\n  \u251c\u2500\u2500 api_example_com_todos.ts\r\n  \u2514\u2500\u2500 api_example_com_users.ts\n"})}),"\n",(0,a.jsx)(s.h2,{id:"generated-types",children:"Generated Types"}),"\n",(0,a.jsx)(s.p,{children:"Fakelab automatically generates TypeScript types from the API response:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:"// .fakelab/snapshots/api_example_com_todos.ts (generated)\r\nexport interface Todo {\r\n  userId: number;\r\n  id: number;\r\n  title: string;\r\n  completed: boolean;\r\n}\n"})}),"\n",(0,a.jsx)(s.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,a.jsx)(s.h3,{id:"bootstrap-from-existing-api",children:"Bootstrap from Existing API"}),"\n",(0,a.jsx)(s.p,{children:"When starting a new project, you can quickly bootstrap mocks from your backend API:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"npx fakelab snapshot https://api.example.com/users --name User\r\nnpx fakelab snapshot https://api.example.com/posts --name Post\n"})}),"\n",(0,a.jsx)(s.h3,{id:"freeze-api-responses",children:"Freeze API Responses"}),"\n",(0,a.jsx)(s.p,{children:"Capture API responses for offline development:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"# Capture current API state\r\nnpx fakelab snapshot https://api.example.com/products --name Product\r\n\r\n# Now you can develop offline using the captured snapshot\n"})}),"\n",(0,a.jsx)(s.h3,{id:"generate-realistic-data",children:"Generate Realistic Data"}),"\n",(0,a.jsx)(s.p,{children:"Instead of manually writing type definitions, capture real API responses:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"npx fakelab snapshot https://jsonplaceholder.typicode.com/users --name User\n"})}),"\n",(0,a.jsx)(s.h2,{id:"integration-with-configuration",children:"Integration with Configuration"}),"\n",(0,a.jsxs)(s.p,{children:["After creating snapshots, enable ",(0,a.jsx)(s.code,{children:"includeSnapshots"})," in your server configuration:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:'// fakelab.config.ts\r\nimport { defineConfig } from "fakelab";\r\n\r\nexport default defineConfig({\r\n  sourcePath: ["./fixtures"],\r\n  server: {\r\n    includeSnapshots: true, // Include snapshots\r\n  },\r\n});\n'})}),"\n",(0,a.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Use Descriptive Names"})," - Use ",(0,a.jsx)(s.code,{children:"--name"})," to give meaningful names to captured types"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Update Regularly"})," - Use ",(0,a.jsx)(s.code,{children:"--refresh"})," to keep a specific snapshot in sync with API changes"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Delete Source"})," - Use ",(0,a.jsx)(s.code,{children:"--delete"})," to delete a specific snapshot"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Version Control"})," - Commit snapshots to git for team consistency"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Combine with Annotations"})," - Add Faker annotations to generated types for dynamic data"]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"limitations",children:"Limitations"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Snapshots capture the structure at the time of capture"}),"\n",(0,a.jsx)(s.li,{children:"Nested objects and arrays are supported"}),"\n",(0,a.jsx)(s.li,{children:"Complex types may need manual refinement"}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);