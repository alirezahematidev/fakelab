"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[89],{573(e,n,r){r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"guides/network-simulation","title":"Network Simulation","description":"Fakelab can simulate real-world network conditions such as latency, random failures, timeouts, and offline mode. This is useful for testing loading states, retry logic, and poor network UX without changing frontend code.","source":"@site/docs/guides/network-simulation.md","sourceDirName":"guides","slug":"/guides/network-simulation","permalink":"/fakelab/docs/guides/network-simulation","draft":false,"unlisted":false,"editUrl":"https://github.com/alirezahematidev/fakelab/docs/guides/network-simulation.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Snapshot","permalink":"/fakelab/docs/guides/snapshot"},"next":{"title":"Webhooks","permalink":"/fakelab/docs/guides/webhook"}}');var i=r(4848),t=r(8453);const o={sidebar_position:5},l="Network Simulation",a={},d=[{value:"Overview",id:"overview",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Basic Network Options",id:"basic-network-options",level:3},{value:"Basic Example",id:"basic-example",level:2},{value:"Network Options",id:"network-options",level:2},{value:"Delay",id:"delay",level:3},{value:"Error Rate",id:"error-rate",level:3},{value:"Timeout Rate",id:"timeout-rate",level:3},{value:"Offline Mode",id:"offline-mode",level:3},{value:"Network Presets",id:"network-presets",level:2},{value:"Defining Presets",id:"defining-presets",level:3},{value:"Using Presets",id:"using-presets",level:3},{value:"Preset Override",id:"preset-override",level:2},{value:"Common Use Cases",id:"common-use-cases",level:2},{value:"Testing Loading States",id:"testing-loading-states",level:3},{value:"Testing Error Handling",id:"testing-error-handling",level:3},{value:"Testing Timeout Handling",id:"testing-timeout-handling",level:3},{value:"Testing Offline Mode",id:"testing-offline-mode",level:3},{value:"Example Scenarios",id:"example-scenarios",level:2},{value:"Development Environment",id:"development-environment",level:3},{value:"Testing Environment",id:"testing-environment",level:3},{value:"Production-like Testing",id:"production-like-testing",level:3},{value:"Best Practices",id:"best-practices",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"network-simulation",children:"Network Simulation"})}),"\n",(0,i.jsx)(n.p,{children:"Fakelab can simulate real-world network conditions such as latency, random failures, timeouts, and offline mode. This is useful for testing loading states, retry logic, and poor network UX without changing frontend code."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"Network simulation helps you test how your application behaves under various network conditions, ensuring a robust user experience even when the network is unreliable."}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"basic-network-options",children:"Basic Network Options"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"type NetworkErrorOptions = {\r\n  statusCodes?: ErrorStatusCode[];\r\n  messages?: Record<ErrorStatusCode, string>;\r\n};\r\n\r\ntype NetworkBehaviourOptions = {\r\n  delay?: number | [number, number];\r\n  errorRate?: number;\r\n  timeoutRate?: number;\r\n  offline?: boolean;\r\n  errors?: NetworkErrorOptions;\r\n};\r\n\r\nexport type NetworkOptions = NetworkBehaviourOptions & {\r\n  preset?: string;\r\n  presets?: Record<string, NetworkBehaviourOptions>;\r\n};\n"})}),"\n",(0,i.jsx)(n.h2,{id:"basic-example",children:"Basic Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'// fakelab.config.ts\r\nimport { defineConfig } from "fakelab";\r\n\r\nexport default defineConfig({\r\n  sourcePath: ["./fixtures"],\r\n  network: {\r\n    delay: [300, 1200], // Random delay between 300ms and 1200ms\r\n    errorRate: 0.1, // 10% chance of errors\r\n    timeoutRate: 0.05, // 5% chance of timeouts\r\n  },\r\n});\n'})}),"\n",(0,i.jsx)(n.h2,{id:"network-options",children:"Network Options"}),"\n",(0,i.jsx)(n.h3,{id:"delay",children:"Delay"}),"\n",(0,i.jsx)(n.p,{children:"Simulate network latency with fixed or random delays."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Fixed delay\r\nnetwork: {\r\n  delay: 500, // Always 500ms delay\r\n}\r\n\r\n// Random delay range\r\nnetwork: {\r\n  delay: [300, 1200], // Random delay between 300ms and 1200ms\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"error-rate",children:"Error Rate"}),"\n",(0,i.jsx)(n.p,{children:"Simulate random network errors."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'network: {\r\n  errorRate: 0.1, // 10% chance of returning an error\r\n  errors: {\r\n    statusCodes: [400, 404, 500] // Random error status code\r\n    messages: {\r\n      400: "Bad request",\r\n      404: "Not found",\r\n      500: "Server error"\r\n    } // Custom messages per status code\r\n  }\r\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"timeout-rate",children:"Timeout Rate"}),"\n",(0,i.jsx)(n.p,{children:"Simulate request timeouts."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"network: {\r\n  timeoutRate: 0.05, // 5% chance of timing out\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"offline-mode",children:"Offline Mode"}),"\n",(0,i.jsx)(n.p,{children:"Force all requests to fail (simulating offline state)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"network: {\r\n  offline: true, // All requests will fail\r\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"network-presets",children:"Network Presets"}),"\n",(0,i.jsx)(n.p,{children:"Define reusable network presets for different scenarios."}),"\n",(0,i.jsx)(n.h3,{id:"defining-presets",children:"Defining Presets"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'// fakelab.config.ts\r\nimport { defineConfig } from "fakelab";\r\n\r\nexport default defineConfig({\r\n  sourcePath: ["./fixtures"],\r\n  network: {\r\n    presets: {\r\n      wifi: {\r\n        delay: [50, 200],\r\n        errorRate: 0.01,\r\n      },\r\n      "3g": {\r\n        delay: [500, 2000],\r\n        errorRate: 0.05,\r\n      },\r\n      "slow-3g": {\r\n        delay: [2000, 5000],\r\n        errorRate: 0.1,\r\n      },\r\n      offline: {\r\n        offline: true,\r\n      },\r\n      unreliable: {\r\n        delay: [100, 500],\r\n        errorRate: 0.3,\r\n        timeoutRate: 0.2,\r\n      },\r\n    },\r\n    preset: "wifi", // Use the wifi preset\r\n  },\r\n});\n'})}),"\n",(0,i.jsx)(n.h3,{id:"using-presets",children:"Using Presets"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'network: {\r\n  preset: "slow-3g", // Activate the slow-3g preset\r\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"preset-override",children:"Preset Override"}),"\n",(0,i.jsxs)(n.p,{children:["When both inline network options and a ",(0,i.jsx)(n.code,{children:"preset"})," are defined, inline options always take precedence and override the preset values."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'network: {\r\n  presets: {\r\n    wifi: {\r\n      delay: [50, 200],\r\n      errorRate: 0.01,\r\n    },\r\n  },\r\n  preset: "wifi",\r\n  delay: [1000, 3000], // This overrides the wifi preset delay\r\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,i.jsx)(n.h3,{id:"testing-loading-states",children:"Testing Loading States"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"network: {\r\n  delay: [1000, 3000], // Simulate slow network\r\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"This helps you test:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Loading spinners"}),"\n",(0,i.jsx)(n.li,{children:"Skeleton screens"}),"\n",(0,i.jsx)(n.li,{children:"Progress indicators"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"testing-error-handling",children:"Testing Error Handling"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"network: {\r\n  errorRate: 0.2, // 20% chance of errors\r\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"This helps you test:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Error messages"}),"\n",(0,i.jsx)(n.li,{children:"Retry logic"}),"\n",(0,i.jsx)(n.li,{children:"Fallback UI"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"testing-timeout-handling",children:"Testing Timeout Handling"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"network: {\r\n  timeoutRate: 0.1, // 10% chance of timeouts\r\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"This helps you test:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Timeout error handling"}),"\n",(0,i.jsx)(n.li,{children:"Request cancellation"}),"\n",(0,i.jsx)(n.li,{children:"User feedback"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"testing-offline-mode",children:"Testing Offline Mode"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"network: {\r\n  offline: true,\r\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"This helps you test:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Offline detection"}),"\n",(0,i.jsx)(n.li,{children:"Cached data display"}),"\n",(0,i.jsx)(n.li,{children:"Offline messaging"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"example-scenarios",children:"Example Scenarios"}),"\n",(0,i.jsx)(n.h3,{id:"development-environment",children:"Development Environment"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'// fakelab.config.ts\r\nexport default defineConfig({\r\n  sourcePath: ["./fixtures"],\r\n  network: {\r\n    delay: [100, 300], // Fast, realistic delays\r\n    errorRate: 0.01, // Rare errors\r\n  },\r\n});\n'})}),"\n",(0,i.jsx)(n.h3,{id:"testing-environment",children:"Testing Environment"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'// fakelab.config.ts\r\nexport default defineConfig({\r\n  sourcePath: ["./fixtures"],\r\n  network: {\r\n    presets: {\r\n      "test-fast": { delay: 0 },\r\n      "test-slow": { delay: [2000, 5000] },\r\n      "test-unreliable": { errorRate: 0.5 },\r\n    },\r\n    preset: "test-fast", // Fast for most tests\r\n  },\r\n});\n'})}),"\n",(0,i.jsx)(n.h3,{id:"production-like-testing",children:"Production-like Testing"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'// fakelab.config.ts\r\nexport default defineConfig({\r\n  sourcePath: ["./fixtures"],\r\n  network: {\r\n    delay: [200, 800], // Realistic production delays\r\n    errorRate: 0.02, // Occasional errors\r\n    timeoutRate: 0.01, // Rare timeouts\r\n  },\r\n});\n'})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use Presets"})," - Define presets for common scenarios"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Test Edge Cases"})," - Use high error/timeout rates to test error handling"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Match Real Conditions"})," - Use realistic delay ranges based on your target network"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Document Presets"})," - Document what each preset simulates"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,n,r){r.d(n,{R:()=>o,x:()=>l});var s=r(6540);const i={},t=s.createContext(i);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);