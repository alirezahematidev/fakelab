"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[93],{875(e,n,r){r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"guides/webhook","title":"Webhooks","description":"Webhooks allow Fakelab to notify external services when specific events occur.","source":"@site/docs/guides/webhook.md","sourceDirName":"guides","slug":"/guides/webhook","permalink":"/fakelab/docs/guides/webhook","draft":false,"unlisted":false,"editUrl":"https://github.com/alirezahematidev/fakelab/docs/guides/webhook.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Network Simulation","permalink":"/fakelab/docs/guides/network-simulation"},"next":{"title":"Server Command","permalink":"/fakelab/docs/guides/server-command"}}');var t=r(4848),i=r(8453);const o={sidebar_position:6},d="Webhooks",a={},l=[{value:"Overview",id:"overview",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Hook Options",id:"hook-options",level:3},{value:"Payload Transformation",id:"payload-transformation",level:3},{value:"Webhook Delivery",id:"webhook-delivery",level:3},{value:"Best Practices",id:"best-practices",level:3},{value:"Use Cases",id:"use-cases",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"webhooks",children:"Webhooks"})}),"\n",(0,t.jsxs)(n.p,{children:["Webhooks allow Fakelab to notify external services when specific events occur.\r\nEach webhook listens to an internal event and sends a ",(0,t.jsx)(n.strong,{children:"POST"})," request with the event payload (or a transformed payload) to a configured HTTP endpoint."]}),"\n",(0,t.jsx)(n.p,{children:"This is useful for integrations such as notifications, automation, logging, or triggering workflows in external systems."}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"Webhook hooks subscribe to Fakelab events and dispatch HTTP requests when those events are triggered."}),"\n",(0,t.jsx)(n.p,{children:"By default:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Requests are sent as ",(0,t.jsx)(n.code,{children:"POST"})]}),"\n",(0,t.jsxs)(n.li,{children:["Payloads are serialized as ",(0,t.jsx)(n.code,{children:"application/json"})]}),"\n",(0,t.jsx)(n.li,{children:"Webhooks run asynchronously and never block the main process"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.p,{children:"Enable webhooks and define hooks in your Fakelab configuration file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'// fakelab.config.ts\r\nimport { defineConfig } from "fakelab";\r\n\r\nexport default defineConfig({\r\n  webhook: {\r\n    enabled: true,\r\n    hooks: [\r\n      {\r\n        name: "snapshot-captured",\r\n        trigger: {\r\n          event: "snapshot:captured",\r\n        },\r\n        method: "POST",\r\n        url: "https://example.com/webhooks/snapshot",\r\n        headers: {\r\n          Authorization: "Bearer YOUR_TOKEN",\r\n        },\r\n        transform: (data) => ({\r\n          id: data.id,\r\n          createdAt: data.createdAt,\r\n        }),\r\n      },\r\n    ],\r\n  },\r\n});\n'})}),"\n",(0,t.jsx)(n.h3,{id:"hook-options",children:"Hook Options"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"name"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"Unique name used for logging and debugging"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"trigger"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"{ event: TriggerEvent }"})}),(0,t.jsx)(n.td,{children:"Event that triggers the webhook"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"method"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"POST"})}),(0,t.jsx)(n.td,{children:"HTTP method (only POST is supported)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"url"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:"Target webhook endpoint (must be HTTP/HTTPS)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"headers"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"HttpHeaders (optional)"})}),(0,t.jsx)(n.td,{children:"Custom HTTP headers"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"transform"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"(data) => unknown (optional)"})}),(0,t.jsx)(n.td,{children:"Transform event payload before sending"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"payload-transformation",children:"Payload Transformation"}),"\n",(0,t.jsx)(n.p,{children:"By default, the raw event payload is sent to the webhook endpoint."}),"\n",(0,t.jsxs)(n.p,{children:["You can customize the payload using the ",(0,t.jsx)(n.code,{children:"transform"})," function:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"transform: (data) => ({\r\n  ...data,\r\n  createdAt: new Date().toISOString(),\r\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"webhook-delivery",children:"Webhook Delivery"}),"\n",(0,t.jsx)(n.p,{children:"When an event is triggered:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Event Fired \u2013 Fakelab emits an internal event"}),"\n",(0,t.jsx)(n.li,{children:"Hook Matched \u2013 Webhooks subscribed to the event are selected"}),"\n",(0,t.jsx)(n.li,{children:"Payload Prepared \u2013 Optional transform is applied"}),"\n",(0,t.jsx)(n.li,{children:"Request Sent \u2013 POST request is sent to the configured URL"}),"\n",(0,t.jsx)(n.li,{children:"Response Evaluated \u2013 Success or failure is logged"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Use descriptive hook names for better logs"}),"\n",(0,t.jsx)(n.li,{children:"Validate endpoints before enabling webhooks"}),"\n",(0,t.jsx)(n.li,{children:"Keep transforms simple and deterministic"}),"\n",(0,t.jsx)(n.li,{children:"Avoid heavy logic inside transforms"}),"\n",(0,t.jsx)(n.li,{children:"Version control configs for team consistency"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,t.jsx)(n.p,{children:"Notify External Services:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'{\r\n  name: "notify-slack",\r\n  trigger: { event: "snapshot:captured" },\r\n  method: "POST",\r\n  url: "https://hooks.slack.com/services/XXX",\r\n  transform: (data) => ({\r\n    text: `Snapshot created: ${data.name}`,\r\n  }),\r\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Trigger CI / Automation:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'{\r\n  name: "trigger-ci",\r\n  trigger: { event: "server:started" },\r\n  method: "POST",\r\n  url: "https://ci.example.com/webhook",\r\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453(e,n,r){r.d(n,{R:()=>o,x:()=>d});var s=r(6540);const t={},i=s.createContext(t);function o(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);