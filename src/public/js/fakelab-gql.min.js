function loadgqlEndpoint() {
  let t = document.getElementById("gql-script");
  return new Promise((e, r) => {
    t ? e("" + t.getAttribute("data-address") + t.getAttribute("data-prefix") + "/graphql") : r("graphql script failed to load.");
  });
}
async function copyGraphQLEndpoint() {
  var e;
  "undefined" != typeof navigator && ((e = await loadgqlEndpoint()), navigator.clipboard.writeText(e));
}
function copyGraphQLResult() {
  var e = document.getElementById("graphql-result"),
    e = e.textContent || e.innerText;
  e && !e.includes("Execute a query") && "undefined" != typeof navigator && navigator.clipboard.writeText(e);
}
function clearGraphQLResult() {
  document.getElementById("graphql-result").innerHTML = '<div class="graphql-result-placeholder"><span>Execute a query to see results here</span></div>';
}
async function executeGraphQLQuery() {
  var e = document.getElementById("graphql-query-editor"),
    r = document.getElementById("graphql-result"),
    e = e.value.trim();
  if (e) {
    r.innerHTML = '<div class="graphql-result-placeholder"><span>Executing query...</span></div>';
    try {
      var t = await loadgqlEndpoint(),
        a = await (await fetch(t, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ query: e }) })).json(),
        n = JSON.stringify(a, null, 2);
      a.errors ? (r.innerHTML = `<pre class="graphql-error">${n}</pre>`) : (r.innerHTML = `<pre class="graphql-success">${n}</pre>`);
    } catch (e) {
      r.innerHTML = `<pre class="graphql-error">Error: ${e.message}</pre>`;
    }
  } else r.innerHTML = '<div class="graphql-error">Please enter a GraphQL query</div>';
}
