function copyAddressUrl() {
  var e = document.getElementById("request_address_url");
  try {
    navigator.clipboard.writeText(e.textContent);
  } catch (e) {
    console.info(e);
  }
}
function copyJsonCode() {
  var e = document.getElementById("source_code");
  try {
    navigator.clipboard.writeText(e.textContent);
  } catch (e) {
    console.info(e);
  }
}
function downloadJsonCode(e) {
  var t = document.getElementById("source_code").textContent.trim(),
    t = new Blob([t], { type: "application/json" });
  let n = URL.createObjectURL(t);
  var t = e.getAttribute("data-source-name"),
    d = new Date().toISOString().replace(/[:.]/g, "-");
  (e.download = t + `-${d}.json`),
    (e.href = n),
    setTimeout(() => {
      URL.revokeObjectURL(n), (e.download = ""), (e.href = "");
    });
}
function openSettings() {
  document.getElementById("setting_overlay").setAttribute("data-visible", "true");
}
function handleCloseSetting(e) {
  var t = document.getElementById("setting_overlay");
  e.target && !t.contains(e.target) && "overlay_trigger" !== e.target.id && t.setAttribute("data-visible", "false");
}
function submitForm(e) {
  e.preventDefault();
  var t = new Set(),
    e = new FormData(e.target),
    n = e.get("count")?.trim(),
    e = e.get("unique_id_key")?.trim(),
    d = new URLSearchParams(),
    o = document.getElementById("unique_id"),
    i = document.getElementById("unique_id_strategy"),
    n =
      (n && 0 < Number(n) ? (Number(n), d.set("count", n.toString()), (window.location.search = d.toString())) : (d.delete("count"), t.add("count")),
      o.checked || (d.delete("uid"), t.add("uid")),
      e && o.checked ? (d.set("uid", e), i.checked && d.set("strategy", "uuid"), (window.location.search = d.toString())) : (d.delete("uid"), d.delete("strategy"), t.add("uid")),
      t.has("uid")),
    o = t.has("count");
  o && n
    ? window.location.href.includes("?") && (([href] = window.location.href.split("?")), (window.location.href = href))
    : ((o && !n) || (!o && n)) && (window.location.search = d.toString());
}
function resetForm(e) {
  e.preventDefault();
  e = new URLSearchParams(window.location.search);
  e.delete("count"), e.delete("uid"), e.delete("strategy"), window.location.href.includes("?") && (window.location.href = window.location.href.split("?")[0]);
}
function onChangeGenerateUniqueId(e) {
  var t = document.getElementById("unique_id"),
    n = document.getElementById("unique_id_key_field"),
    d = document.getElementById("unique_strategy_container");
  (t.checked = !t.checked), n.setAttribute("data-visible", t.checked.toString()), d.setAttribute("data-visible", t.checked.toString());
}
function onHandleUniqueIdStrategy(e) {
  var t = document.getElementById("unique_id_strategy");
  t.checked = !t.checked;
}
window.addEventListener("click", handleCloseSetting),
  window.addEventListener("DOMContentLoaded", () => {
    var e = document.getElementById("count"),
      t = document.getElementById("unique_id"),
      n = document.getElementById("unique_id_strategy"),
      d = document.getElementById("unique_id_key"),
      o = document.getElementById("unique_id_key_field"),
      i = document.getElementById("unique_strategy_container"),
      a = new URLSearchParams(window.location.search),
      c = a.get("count"),
      r = a.get("uid");
    c && (e.value = c), r && ((t.checked = !0), (d.value = r), o.setAttribute("data-visible", "true"), i.setAttribute("data-visible", "true"), a.has("s")) && (n.checked = !0);
  });
