let address_url = document.querySelector(".address_url");
async function copy() {
  try {
    await navigator.clipboard.writeText(address_url.textContent);
  } catch (e) {
    console.info(e);
  }
}
function open_settings() {
  document.getElementById("setting_overlay").setAttribute("data-visible", "true");
}
function handleCloseSetting(e) {
  var t = document.getElementById("setting_overlay");
  e.target && !t.contains(e.target) && "overlay_trigger" !== e.target.id && t.setAttribute("data-visible", "false");
}
function submitForm(e) {
  e.preventDefault();
  var t = new Set(),
    e = new FormData(e.target),
    n = e.get("count")?.trim(),
    e = e.get("unique_id_key")?.trim(),
    i = new URLSearchParams(),
    d = document.getElementById("unique_id"),
    o = document.getElementById("unique_id_strategy"),
    n =
      (n && 0 < Number(n) ? (Number(n), i.set("count", n.toString()), (window.location.search = i.toString())) : (i.delete("count"), t.add("count")),
      d.checked || (i.delete("uid"), t.add("uid")),
      e && d.checked ? (i.set("uid", e), o.checked && i.set("s", "uuid"), (window.location.search = i.toString())) : (i.delete("uid"), i.delete("s"), t.add("uid")),
      t.has("uid")),
    d = t.has("count");
  d && n
    ? window.location.href.includes("?") && (([href] = window.location.href.split("?")), (window.location.href = href))
    : ((d && !n) || (!d && n)) && (window.location.search = i.toString());
}
function resetForm(e) {
  e.preventDefault();
  e = new URLSearchParams(window.location.search);
  e.delete("count"), e.delete("uid"), e.delete("s"), window.location.href.includes("?") && (window.location.href = window.location.href.split("?")[0]);
}
function onChangeGenerateUniqueId(e) {
  var t = document.getElementById("unique_id"),
    n = document.getElementById("unique_id_key_field"),
    i = document.getElementById("unique_strategy_container");
  (t.checked = !t.checked), n.setAttribute("data-visible", t.checked.toString()), i.setAttribute("data-visible", t.checked.toString());
}
function onHandleUniqueIdStrategy(e) {
  var t = document.getElementById("unique_id_strategy");
  t.checked = !t.checked;
}
window.addEventListener("click", handleCloseSetting),
  window.addEventListener("DOMContentLoaded", () => {
    var e = document.getElementById("count"),
      t = document.getElementById("unique_id"),
      n = document.getElementById("unique_id_strategy"),
      i = document.getElementById("unique_id_key"),
      d = document.getElementById("unique_id_key_field"),
      o = document.getElementById("unique_strategy_container"),
      a = new URLSearchParams(window.location.search),
      u = a.get("count"),
      c = a.get("uid");
    u && (e.value = u), c && ((t.checked = !0), (i.value = c), d.setAttribute("data-visible", "true"), o.setAttribute("data-visible", "true"), a.has("s")) && (n.checked = !0);
  });
